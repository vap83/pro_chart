function ProChart_InitZoom(x){function y(){$(d.parent+" .zoom-buttons").prochart_hoverIntent(function(){$(this).css("opacity","1")},function(){$(this).css("opacity","0.1")})}function p(a,z){var b=d.chart.getDateByIndex(a),c=d.chart.getDateByIndex(z);if(null!=b){if(null==t(".adv-svgchart-zoom .zoom-date-range #date-start")){var e=$(g.parent).find(".adv-svgchart-zoom .zoom-date-range #date-start");try{g.mycache[".adv-svgchart-zoom .zoom-date-range #date-start"]=e}catch(n){}}t(".adv-svgchart-zoom .zoom-date-range #date-start").html(b)}if(null!=
c){if(null==t(".adv-svgchart-zoom .zoom-date-range #date-end")){b=$(g.parent).find(".adv-svgchart-zoom .zoom-date-range #date-end");try{g.mycache[".adv-svgchart-zoom .zoom-date-range #date-end"]=b}catch(f){}}t(".adv-svgchart-zoom .zoom-date-range #date-end").html(c)}}function A(a){y();$(a).find("button").on("click",function(){var a=$(this).attr("tid");"undefined"!=d.actions&&d.actions.action(a);return!1})}function u(a,b,e){var c="",d={width:null,height:null},g=null,f=null;"undefined"!=typeof b&&("undefined"!=
typeof b.width&&(g=b.width),"undefined"!=typeof b.height&&(f=b.height));c="undefined"==typeof a.position?c+"position :absolute;":c+"position :"+a.position+"; ";b="px";"undefined"!=typeof e&&null!=e&&(b=e);"undefined"!=typeof a.display&&(c=c+"display :"+a.display+";");"undefined"!=typeof a.left&&(d.left=a.left,c=c+"left :"+s(a.left,b)+"; ");"undefined"!=typeof a.right&&(d.right=a.right,c=c+"right :"+s(a.right,b)+"; ");"undefined"!=typeof a.top&&(d.top=a.top,c=c+"top :"+s(a.top,b)+"; ");"undefined"!=
typeof a.bottom&&(d.bottom=a.bottom,c=c+"bottom :"+s(a.bottom,b)+"; ");"undefined"!=typeof a.width?null==g||"auto"!=a.width.toString().toLowerCase()&&"inherit"!=a.width.toString().toLowerCase()?(d.width=a.width,c=c+"width :"+s(a.width,b)+";"):(d.width=g-q(a.left)-q(a.right),c=c+"width :"+d.width+b+";"):null!=g&&(d.width=g-q(a.left)-q(a.right),c=c+"width :"+d.width+b+";");"undefined"!=typeof a.height?null==f||"auto"!=a.height.toString().toLowerCase()&&"inherit"!=a.height.toString().toLowerCase()?(d.height=
a.height,c=c+"height :"+s(a.height,b)+"; "):(d.height=f-q(a.top)-q(a.bottom),c=c+"height :"+d.height+b+";"):null!=f&&(d.height=f-q(a.top)-q(a.bottom),c=c+"height :"+d.height+b+";");"undefined"!=typeof a.view&&!0!=a.view&&(c+="display : none; ");0<c.length&&(c='style="'+c+'"');return{style:c,size:d}}function s(a,b){return"auto"==a.toString().toLowerCase()||"inherit"==a.toString().toLowerCase()?a:a+b}function q(a){if("undefined"!=typeof a)return"auto"==a.toString().toLowerCase()||"inherit"==a.toString().toLowerCase()?
0:parseInt(a)}function t(a){try{return"undefined"!=typeof g.mycache[a]&&null!=g.mycache[a]?g.mycache[a]:null}catch(b){return null}}var g={},d=x,e,b,r,w=d.api.layout.getbuttonStyle();d.api.debug.getLogger("prochart.gui.zoom");d.zoomobj=g;g.size={width:0,pwidth:0,rectRight:null,rectLeft:null,parent_width:0,parent_height:0};g.mycache={};var v=/=""/g;g.gui={viewZoom:function(a){g.parent=a;a=[];for(var b=d.currenlayout.zooms,e=0;e<b.length;e++){var c=b[e],h=d.commonutils.func.returnShortUniqID(),n="",
f="",k={width:null,height:null},l=$(g.parent).find("#"+c.parent);l&&(k.width=l.innerWidth(),k.height=l.innerHeight());c.guiid=h;"undefined"!=typeof c.location&&(n=n+" loc-"+c.location);f=h;"undefined"!=typeof c.id&&(f=c.id);h=d.patterns.zoom.containter.replace(v,"").replace(/%css%/g,n).replace(/%tid%/g,f).replace(/%id%/g,h);f="";for(n=0;n<c.items.length;n++)switch(f=c.items[n],f.type){case "chart_container":var m=d.commonutils.func.returnShortUniqID();a.push(m);f=u(f.possition,k);f={zoom:d.patterns.zoom.chart_container.replace(v,
"").replace(/%style%/g,f.style).replace(/%id%/g,m)};h=h.replace(/%html%/g,f.zoom+"%html%");break;case "daterange":m=d.commonutils.func.returnShortUniqID(),f=u(f.possition,k),f={zoom:d.patterns.zoom.date_range.replace(v,"").replace(/%style%/g,f.style).replace(/%id%/g,m)},h=h.replace(/%html%/g,f.zoom+"%html%")}h=h.replace(/%html%/g,"");l.append(h);for(c=0;c<a.length;c++)if(k=l.find("#"+a[c]+" > div"),0<k.length){d.chart.ZoomSvgChart=k[0];try{d.chart.SetZoomContainer(k)}catch(r){}}}},viewZoomToolbox:function(){var a=
$(d.init.chartcontainer).find(".chart-price-zoom");if(0<a.length){var b=d.patterns.zoom.toolbox.replace(/%icon-source%/g,w.icon_source).replace(/%icon-prefix%/g,w.icon_prefix);a.html(b);A(a);"undefined"!=typeof d.localizationobj&&d.localizationobj.gui.updateFromDataLang(a)}},adjustSize:function(){for(var a=d.currenlayout.zooms,b=0;b<a.length;b++){var e=a[b],c={width:null,height:null},h=$(g.parent).find("#"+e.parent);if(h){c.width=h.innerWidth();c.height=h.innerHeight();for(var n=0;n<e.items.length;n++){var f=
e.items[n];switch(f.type){case "chart_container":var k=h,f=u(f.possition,c).size,k=k.find(".zoom-chart-container");if(0!=k.length){for(var l="height width top right bottom left".split(" "),m=0;m<l.length;m++)"undefined"!=typeof f[l[m]]&&k.css(l[m],f[l[m]]);d.chart.AdjustZoomSize(f[l[1]],f[l[0]])}break;case "daterange":if(k=h,f=u(f.possition,c).size,k=k.find(".zoom-date-range"),0!=k.length)for(l="height width top right bottom left".split(" "),m=0;m<l.length;m++)"undefined"!=typeof f[l[m]]&&k.css(l[m],
f[l[m]])}}}}},onZoomOut:function(){b+=5;e-=5;b-e+1>r?(b=r-1,e=0):0>e?(b+=0-e,e=0):b>r-1&&(e-=b-(r-1),b=r-1);d.chart.SetZoom(e,b,!0);p(e,b)},onZoomIn:function(){10<b-e+1&&(b-=5,e+=5,d.chart.SetZoom(e,b,!0),p(e,b))},onZoomLeft:function(){10<e?(e-=10,b-=10):(b-=e,e=0);d.chart.SetZoom(e,b,!0);p(e,b)},onZoomRight:function(){var a=b-e+1;b<r-11?(e+=10,b+=10):(b=r-1,e=b-a+1);d.chart.SetZoom(e,b,!0);p(e,b)},onZoomAll:function(){b=r-1;e=0;d.chart.SetZoom(e,b,!0);p(e,b)},onZoomRestore:function(){b=r-1-d.chart.NumOfFutureBars+
d.chart.NumOfDefaultVisibleFutureBars;e=b-d.chart.NumVisibleBars+1;d.chart.SetZoom(e,b,!0);p(e,b)},onZoomBottomFixed:function(a){var b=$(g.parent).find(".adv-svgchart-zoom");"undefined"!=typeof b&&(a?($(b).addClass("zoom-on-bottom-page"),$(g.parent).addClass("zoom-height-space")):($(b).removeClass("zoom-on-bottom-page"),$(g.parent).removeClass("zoom-height-space")))},onTimeZoneChange:function(){},onZoomChange:function(a,q,p,c,h,n){e=q;b=p;r=c;a=d.chart.getDateByIndex(q);p=d.chart.getDateByIndex(p);
null!=a&&$(g.parent).find(".date-start").html(a);null!=p&&$(g.parent).find(".date-end").html(p)},changeLocalization:function(){}};return g};
