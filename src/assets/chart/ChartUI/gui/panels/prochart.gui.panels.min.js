function ProChart_InitPanels(ta){function I(a){for(var b=0;b<d.length;b++)switch(d[b].type){case a:return d[b]}return null}function Y(){var a=u.length;J();for(var b=0;b<a;b++)switch(u[b].type){case "price":Z(u[b].id);break;case "study":aa(u[b].id);break;case "signal":U(u[b].id)}}function F(){var a=$.prochartcache.get(e.init.chartcontainer);if(2>d.length)z=[],a&&$(a).find(".chart-pane-splitter").remove();else{for(var b=[],a=[],c=0;c<d.length-1;c++)b.push({pane_before_guiid:d[c].guiid,pane_after_guiid:d[c+
1].guiid});for(c=z.length-1;0<=c;c--){for(var g=!1,f=0;f<b.length;f++)z[c].pane_before_guiid==b[f].pane_before_guiid&&z[c].pane_after_guiid==b[f].pane_after_guiid&&(g=!0);g||((f=$("#"+z[c].guiid))&&f.remove(),z.splice(c,1))}for(f=0;f<b.length;f++){g=!1;for(c=0;c<z.length;c++)z[c].pane_before_guiid==b[f].pane_before_guiid&&z[c].pane_after_guiid==b[f].pane_after_guiid&&(g=!0);g||a.push({pane_before_guiid:b[f].pane_before_guiid,pane_after_guiid:b[f].pane_after_guiid})}for(f=0;f<a.length;f++)b=ua(a[f].pane_before_guiid,
a[f].pane_after_guiid),$("#"+b.guiid).prochart_splitterh({handle:"",cursor:"n-resize",min:50,start:function(){e.chart.EnableSplitMode(!0);$.prochartcache.get(e.init.chartcontainer)&&$.prochartcache.get(e.init.chartcontainer).css({overflow:"hidden"})},resizing:function(b,a){for(var c=0;c<b.length;c++){var g=b[c];if("undefined"!=typeof g)for(var f=0;f<d.length;f++)if(d[f].guiid==g.id)switch(d[f].type){case "price":V(d[f],g.width,g.height);if("undefined"!=typeof d[f].onResizePanel&&"function"==typeof d[f].onResizePanel)d[f].onResizePanel(d[f]);
break;case "study":ba(d[f],g.width,g.height);if("undefined"!=typeof d[f].onResizePanel&&"function"==typeof d[f].onResizePanel)d[f].onResizePanel(d[f]);break;case "signal":if(ca(d[f],g.width,g.height),"undefined"!=typeof d[f].onResizePanel&&"function"==typeof d[f].onResizePanel)d[f].onResizePanel(d[f])}}a&&e.chart.AdjustSize(null,null)},completed:function(){e.chart.AdjustSize(null,null);e.chart.EnableSplitMode(!1);$.prochartcache.get(e.init.chartcontainer)&&$.prochartcache.get(e.init.chartcontainer).css({overflow:"inherit"})}})}}
function da(a){for(var b=0;b<a.length;b++){for(var c=0;c<u.length;c++)u[c].id==a[b].id&&u.splice(c,1);for(c=0;c<d.length;c++)if(d[c].id==a[b].id){v.guiid==d[c].guiid&&(v.guiid=null);var g="#"+d[c].guiid,f=$.prochartcache.get(e.init.chartcontainer,g);if(f){f.remove();try{$.prochartcache.clearByMask(g)}catch(k){}}d.splice(c,1)}}J();H();F();W();a=[];for(b=0;b<d.length;b++)"study"!=d[b].type&&"price"!=d[b].type||a.push(d[b]);return a}function ea(a){for(var b={},c=0,g=a.length;c<g;c++){var f=a[c],d=f.id,
l="",h="";try{l=fa(d).type,h=fa(d).legend.guiid,b[h]={id:d,type:l,guid:h,fields:[]}}catch(m){B.warn("Not found panel and panel type",d);continue}for(var D=[],q=0;q<f.fields.length;q++)switch(f.fields[q].type){case "price":try{if(K(e.currenlayout.chart_panels.price.legend.view)){var n=f.fields[q],p=R(d);if(null!=p){if(!$.prochartcache.get("#"+p,"#"+n.uid)){var r=e.patterns.panels.legend_price.replace(/%id%/g,n.uid).replace(/%item_id%/g,n.editIdx).replace(/%icon-source%/g,G.icon_source).replace(/%icon-prefix%/g,
G.icon_prefix).replace(/%visible%/g,n.visible?"":"legend-visible-off").replace(/%item_type%/g,n.type);$.prochartcache.get("#"+p).append(r)}$.prochartcache.get("#"+p,"#"+n.uid,".legend-price-description").html(n.name);$.prochartcache.get("#"+p,"#"+n.uid,".legend-price-open.legend-title").html(e.localizationobj.gui.returnLocalizationString("chart."+n.captions[0],n.captions[0]));$.prochartcache.get("#"+p,"#"+n.uid,".legend-price-low.legend-title").html(e.localizationobj.gui.returnLocalizationString("chart."+
n.captions[1],n.captions[1]));$.prochartcache.get("#"+p,"#"+n.uid,".legend-price-high.legend-title").html(e.localizationobj.gui.returnLocalizationString("chart."+n.captions[2],n.captions[2]));$.prochartcache.get("#"+p,"#"+n.uid,".legend-price-close.legend-title").html(e.localizationobj.gui.returnLocalizationString("chart."+n.captions[3],n.captions[3]));var u=e.api.props.chart.gui.legend.font_darklight_auto,v=e.api.props.chart.gui.legend.font_darklight_percent,w=e.commonutils.func.LightenDarkenColor(n.colors[0],
v,u);$.prochartcache.get("#"+p,"#"+n.uid,".legend-price-open.legend-value").css("color",w).html(n.values[0]);var z=e.commonutils.func.LightenDarkenColor(n.colors[1],v,u);$.prochartcache.get("#"+p,"#"+n.uid,".legend-price-low.legend-value").css("color",z).html(n.values[1]);var C=e.commonutils.func.LightenDarkenColor(n.colors[2],v,u);$.prochartcache.get("#"+p,"#"+n.uid,".legend-price-high.legend-value").css("color",C).html(n.values[2]);var N=e.commonutils.func.LightenDarkenColor(n.colors[3],v,u);$.prochartcache.get("#"+
p,"#"+n.uid,".legend-price-close.legend-value").css("color",N).html(n.values[3])}}D.push(f.fields[q].uid);b[h].fields.push(f.fields[q].uid)}catch(s){}break;case "study":switch(l){case "price":try{K(e.currenlayout.chart_panels.price.legend.view)&&ga(d)&&ha(d,f.fields[q]),D.push(f.fields[q].uid),b[h].fields.push(f.fields[q].uid)}catch(t){}break;case "study":try{K(e.currenlayout.chart_panels.study.legend.view)&&ga(d)&&ha(d,f.fields[q]),D.push(f.fields[q].uid),b[h].fields.push(f.fields[q].uid)}catch(Ca){}}break;
case "compare":try{if(K(e.currenlayout.chart_panels.price.legend.view)){var O=d,y=f.fields[q],x=R(O);if(null!=x){if(null==$.prochartcache.get("#"+x,"#"+y.uid)){var P=e.patterns.panels.legend_compare.replace(/%item_id%/g,y.editIdx).replace(/%icon-source%/g,G.icon_source).replace(/%icon-prefix%/g,G.icon_prefix).replace(/%item_type%/g,y.type).replace(/%visible%/g,y.visible?"":"legend-visible-off").replace(/%css%/g,!1==M(O)||"false"==M(O)?" hide-legend":"").replace(/%id%/g,y.uid);$.prochartcache.get("#"+
x).append(P)}var va=e.commonutils.func.LightenDarkenColor(y.colors[0],e.api.props.chart.gui.legend.font_darklight_percent,e.api.props.chart.gui.legend.font_darklight_auto);$.prochartcache.get("#"+x,"#"+y.uid,".legend-compare-description")&&$.prochartcache.get("#"+x,"#"+y.uid,".legend-compare-description").html(y.captions[0]);$.prochartcache.get("#"+x,"#"+y.uid,".legend-compare-title")&&$.prochartcache.get("#"+x,"#"+y.uid,".legend-compare-title").html(e.localizationobj.gui.returnLocalizationString("chart.close"));
$.prochartcache.get("#"+x,"#"+y.uid,".legend-compare-value")&&$.prochartcache.get("#"+x,"#"+y.uid,".legend-compare-value").css("color",va).html(y.values[0])}}D.push(f.fields[q].uid);b[h].fields.push(f.fields[q].uid)}catch(J){}break;case "plugin":try{if(K(e.currenlayout.chart_panels.plugin.legend.view)){var O=d,A=f.fields[q],L=R(O);if(null!=L){if(null==$.prochartcache.get("#"+L,"#"+A.uid)){var F="";"undefined"!=A.titlelocalize&&(F='data-localize="'+A.titlelocalize+'"');var H=e.patterns.panels.legend_plugin.replace(/%display-closebt%/g,
A.closeBtn?"":"display:none").replace(/%item_id%/g,A.editIdx).replace(/%item_type%/g,A.type).replace(/%legend_title_localization%/g,F).replace(/%visible%/g,A.visible?"":"legend-visible-off").replace(/%css%/g,!1==M(O)||"false"==M(O)?" hide-legend":"").replace(/%id%/g,A.uid);$.prochartcache.get("#"+L).append(H)}$.prochartcache.get("#"+L,"#"+A.uid,".legend-plugin-description")&&$.prochartcache.get("#"+L,"#"+A.uid,".legend-plugin-description").html(A.name)}}D.push(f.fields[q].uid);b[h].fields.push(f.fields[q].uid)}catch(E){}}}a=
!1;c=Object.keys(S);f=Object.keys(b);g=e.commonutils.func.intersection_difference(c,f);f=e.commonutils.func.intersection_difference(f,c);c=g.res2;g=g.res1;f=f.res2;0<c.length&&(a=!0,B.debug("Deleted Panels:",c));0<f.length&&(a=!0,B.debug("Added Panesl",f));f=0;for(d=g.length;f<d;f++){l=g[f];h=S[l].type;q=S[l].fields;n=b[l].fields;D=e.commonutils.func.intersection_difference(q,n).res2;q=e.commonutils.func.intersection_difference(n,q).res2;0<D.length&&(B.debug("deleted legend",D),a=!0);0<q.length&&
(a=!0,B.debug("added legend ",q));q=0;for(n=D.length;q<n;q++)switch(h){case "study":case "price":case "compare":case "plugin":p=l,r=D[q],$.prochartcache.get("#"+p,"#"+r)&&($.prochartcache.get("#"+p,"#"+r).remove(),u=$.prochartcache.clearByMask("#"+p,"#"+r),B.debug("Delete Item by legnd, mask:","#"+p,"#"+r,u))}if(0<c.length)for(l=0,h=c.length;l<h;l++)$.prochartcache.clearByMask("#"+c[l])}S=jQuery.extend(!0,[],b);a&&(wa(),xa(),ya(),b=I("price").guiid,$.prochartcache.update("#"+b,".legend-study, .legend-compare"))}
function ha(a,b){var c=R(a);if(null!=c){if(null==$.prochartcache.get("#"+c,"#"+b.uid)){var g=e.patterns.panels.legend_study.replace(/%display-closebt%/g,b.closeBtn?"":"display:none").replace(/%icon-source%/g,G.icon_source).replace(/%icon-prefix%/g,G.icon_prefix).replace(/%item_id%/g,b.editIdx).replace(/%item_type%/g,b.type).replace(/%visible%/g,b.visible?"":"legend-visible-off").replace(/%id%/g,b.uid).replace(/%css%/g,!1==M(a)||"false"==M(a)?" hide-legend":"");$.prochartcache.get("#"+c).append(g);
if(1<b.values.length)for(var g=$.prochartcache.get("#"+c,"#"+b.uid,".legend-study-values"),f=$.prochartcache.get("#"+c,"#"+b.uid,".legend-study-values",".legend-study-value").clone(!0),d=0;d<b.values.length-1;d++)g.append(f.clone(!0))}g="";for(f=0;f<b.sources.length;f++)f<b.sources.length&&0<g.length&&(g+=","),g+=e.localizationobj.gui.returnLocalizationString("dialogs.indicator.source."+b.sources[f],b.sources[f]).toLowerCase();for(f=0;f<b.params.length;f++)f<b.params.length&&0<g.length&&(g+=","),
g+=b.params[f];0<g.length&&(g="("+g+")");$.prochartcache.get("#"+c,"#"+b.uid);$.prochartcache.get("#"+c,"#"+b.uid,".legend-study-description").html(b.name);$.prochartcache.get("#"+c,"#"+b.uid," .legend-study-params").html(g);c=$.prochartcache.get("#"+c,"#"+b.uid,".legend-study-value");g=e.api.props.chart.gui.legend.font_darklight_auto;f=e.api.props.chart.gui.legend.font_darklight_percent;for(d=0;d<b.values.length;d++){var l=e.commonutils.func.LightenDarkenColor(b.colors[d],f,g);c.eq(d).css("color",
l).html(b.values[d]?b.values[d]:"NaN")}}}function W(){null!=v.guiid&&($.prochartcache.get("#"+v.guiid)&&$.prochartcache.get("#"+v.guiid).removeClass("controlpanel-button-selected"),v.guiid=null)}function ia(){$.prochartcache.update(e.init.chartcontainer,".controlpanel-down");if($.prochartcache.get(e.init.chartcontainer,".controlpanel-down"))$.prochartcache.get(e.init.chartcontainer,".controlpanel-down").off().on("click",function(){var a=$(this).attr("itemid");ja(a,"down")})}function ka(){$.prochartcache.update(e.init.chartcontainer,
".controlpanel-up");if($.prochartcache.get(e.init.chartcontainer,".controlpanel-up"))$.prochartcache.get(e.init.chartcontainer,".controlpanel-up").off().on("click",function(){var a=$(this).attr("itemid");ja(a,"up")})}function ja(a,b){var c,g,f,k,l,h,m,p,q;if(!(2>d.length)){var n=["price","study"];switch(b){case "up":q=p=m=h=l=k=f=g=null;for(c=0;c<d.length;c++)if(d[c].guiid==a){h=d[c].guiid;m=c;p=d[c].id;q=d[c].type;break}else g=d[c].guiid,f=c,k=d[c].id,l=d[c].type;null==g?(c=d[d.length-1].guiid,g=
d[d.length-1].id,E(d,m,d.length-1),$("#"+c).after($("#"+h)),-1<n.indexOf(q)&&e.chart.SwitchPanels(p,g,"bottom")):(E(d,m,f),$("#"+g).before($("#"+h)),-1<n.indexOf(l)&&-1<n.indexOf(q)&&e.chart.SwitchPanels(k,p,"normal"));F();break;case "down":q=p=m=h=l=k=f=g=null;for(c=d.length-1;-1<c;c--)if(d[c].guiid==a){h=d[c].guiid;m=c;p=d[c].id;q=d[c].type;break}else g=d[c].guiid,f=c,k=d[c].id,l=d[c].type;null==g?(c=d[0].guiid,g=d[0].id,E(d,m,0),$("#"+c).before($("#"+h)),-1<n.indexOf(q)&&e.chart.SwitchPanels(p,
g,"top")):(E(d,m,f),$("#"+g).after($("#"+h)),-1<n.indexOf(l)&&-1<n.indexOf(q)&&e.chart.SwitchPanels(k,p,"normal"));F();break;case "top":q=p=m=h=l=k=f=g=null;for(c=d.length-1;-1<c;c--)if(d[c].guiid==a){h=d[c].guiid;m=c;p=d[c].id;q=d[c].type;break}else g=d[c].guiid,f=c,k=d[c].id,l=d[c].type;null==g?(c=d[0].guiid,g=d[0].id,E(d,m,0),$("#"+c).before($("#"+h)),-1<n.indexOf(q)&&e.chart.SwitchPanels(p,g,"top")):(E(d,m,f),$("#"+g).after($("#"+h)),-1<n.indexOf(l)&&-1<n.indexOf(q)&&e.chart.SwitchPanels(k,p,
"normal"));F()}}}function E(a,b,c){var g=a[b];a.splice(b,1);a.splice(c,0,g)}function la(){$.prochartcache.update(e.init.chartcontainer,".controlpanel-window");if($.prochartcache.get(e.init.chartcontainer,".controlpanel-window"))$.prochartcache.get(e.init.chartcontainer,".controlpanel-window").off().on("click",function(){var a=$(this).attr("itemid");$(this).toggleClass("controlpanel-button-selected");v.guiid=v.guiid==a?null:a;H();e.chart.AdjustSize(null,null)})}function ma(){$.prochartcache.update(e.init.chartcontainer,
".controlpanel-close");if($.prochartcache.get(e.init.chartcontainer,".controlpanel-close"))$.prochartcache.get(e.init.chartcontainer,".controlpanel-close").off().on("click",function(){var a=$(this).attr("panelid");e.chart.DeletePanel(a)})}function wa(){$.prochartcache.update(e.parent,".legend-button-close");if($.prochartcache.get(e.parent,".legend-button-close"))$.prochartcache.get(e.parent,".legend-button-close").off().on("click",function(){var a=$(this).attr("itemid"),b=$(this).attr("itemtype");
switch(b){case "plugin":e.signals.gui.pluginDelete(a);break;default:e.chart.legend.Delete(a,b)}})}function ya(){$.prochartcache.update(e.parent,".legend-button-visible");if($.prochartcache.get(e.parent,".legend-button-visible"))$.prochartcache.get(e.parent,".legend-button-visible").off().on("click",function(){var a=$(this).attr("itemid"),b=$(this).attr("itemtype"),c=$(this).hasClass("legend-visible-off");e.chart.legend.SetVisible(a,b,c);$(this).toggleClass("legend-visible-off")})}function xa(){$.prochartcache.update(e.parent,
".legend-button-properties");if($.prochartcache.get(e.parent,".legend-button-properties"))$.prochartcache.get(e.parent,".legend-button-properties").off().on("click",function(){var a=$(this).attr("itemid"),b=$(this).attr("itemtype");switch(b){case "plugin":e.signals.gui.pluginOpenDialog(a);break;default:e.chart.legend.Edit(a,b,!1)}})}function R(a){for(var b=0;b<d.length;b++)if(d[b].id==a&&("price"==d[b].type||"study"==d[b].type||"plugin"==d[b].type||"signal"==d[b].type))return d[b].legend.guiid;return null}
function fa(a){for(var b=0;b<d.length;b++)if(d[b].id==a&&("price"==d[b].type||"study"==d[b].type||"plugin"==d[b].type||"signal"==d[b].type))return d[b];return null}function ga(a){for(var b=0;b<d.length;b++)if(d[b].id==a&&("price"==d[b].type||"study"==d[b].type||"plugin"==d[b].type||"signal"==d[b].type))switch(d[b].type){case "price":try{return e.currenlayout.chart_panels.price.collapselegend?e.currenlayout.chart_panels.price.collapselegend.collapseopen||e.currenlayout.chart_panels.price.collapselegend.view:
!0}catch(c){return!0}case "study":try{return e.currenlayout.chart_panels.study.collapselegend?e.currenlayout.chart_panels.study.collapselegend.collapseopen||e.currenlayout.chart_panels.study.collapselegend.view:!0}catch(g){return!0}case "plugin":return!0;case "signal":return!0}}function M(a){for(var b=0;b<d.length;b++)if(d[b].id==a&&("price"==d[b].type||"study"==d[b].type||"plugin"==d[b].type||"signal"==d[b].type)){if("undefined"!=typeof d[b].legend.collapseopen)return d[b].legend.collapseopen;switch(d[b].type){case "price":try{var c=
e.currenlayout.chart_panels.price;return c.collapselegend?c.collapselegend.collapseopen:!0}catch(g){return!0}case "study":try{var f=e.currenlayout.chart_panels.study;return f.collapselegend?f.collapselegend.collapseopen:!0}catch(k){return!0}}}return!0}function H(){J();for(var a=0;a<d.length;a++)switch(d[a].type){case "price":V(d[a],null,null);if("undefined"!=typeof d[a].onResizePanel&&"function"==typeof d[a].onResizePanel)d[a].onResizePanel(d[a]);w(d[a],"controlpanel");w(d[a],"zoom");w(d[a],"legend");
w(d[a],"lastupdate");w(d[a],"communic");w(d[a],"axisxmsg");break;case "study":ba(d[a],null,null);w(d[a],"controlpanel");w(d[a],"legend");if("undefined"!=typeof d[a].onResizePanel&&"function"==typeof d[a].onResizePanel)d[a].onResizePanel(d[a]);break;case "splitter":na(d[a]);break;case "signal":ca(d[a]);if("undefined"!=typeof d[a].onResizePanel&&"function"==typeof d[a].onResizePanel)d[a].onResizePanel(d[a]);w(d[a],"controlpanel");w(d[a],"legend")}}function w(a,b,c){try{var g=e.currenlayout.chart_panels[a.type][b];
"undefined"!=typeof g&&"undefined"!=typeof g.view&&K(g.view)?"controlpanel"==b&&1==d.length?($.prochartcache.get("#"+a[b].guiid).css("display","none"),"undefined"!=typeof c&&$.prochartcache.get("#"+a[c].guiid).css("display","none")):($.prochartcache.get("#"+a[b].guiid).css("display","block"),"undefined"!=typeof c&&$.prochartcache.get("#"+a[c].guiid).css("display","block")):($.prochartcache.get("#"+a[b].guiid).css("display","none"),"undefined"!=typeof c&&$.prochartcache.get("#"+a[c].guiid).css("display",
"none"))}catch(f){}}function oa(){for(var a=0;a<z.length;a++)switch(z[a].type){case "splitter":na(z[a])}}function Z(a){var b=$.prochartcache.get(e.init.chartcontainer),c=e.currenlayout.chart_panels.unit;if(null!=e.patterns.panels.price){var g=e.commonutils.func.returnShortUniqID(),f=e.commonutils.func.returnShortUniqID(),k=e.commonutils.func.returnShortUniqID(),l=e.commonutils.func.returnShortUniqID(),h=e.commonutils.func.returnShortUniqID(),m=e.commonutils.func.returnShortUniqID(),D=e.commonutils.func.returnShortUniqID(),
q=e.commonutils.func.returnShortUniqID(),n=e.commonutils.func.returnShortUniqID(),u=e.commonutils.func.returnShortUniqID(),v=e.commonutils.func.returnShortUniqID(),w=e.commonutils.func.returnShortUniqID(),z=e.commonutils.func.returnShortUniqID(),F=e.commonutils.func.returnShortUniqID(),H=e.commonutils.func.returnShortUniqID(),I=e.commonutils.func.returnShortUniqID(),J=e.commonutils.func.returnShortUniqID(),s=pa(),t=e.patterns.panels.price.replace(T,"").replace(/%id%/g,g).replace(/%guiid%/g,g).replace(/%pane-style%/g,
p(s.panelsize,c)),t=t.replace(/%main-id%/g,l).replace(/%main-style%/g,p(s.innermainsize,c)),B={width:s.innermainsize.width,height:s.innermainsize.height,top:0,left:0,"z-index":1},t=t.replace(/%pricealert-id%/g,I).replace(/%cancas-price-id%/g,f).replace(/%pricealert-style%/g,p(B,c)).replace(/%pricealert-size%/g,X(B,c)),t=t.replace(/%xalert-id%/g,J).replace(/%cancas-x-id%/g,k).replace(/%xalert-style%/g,p(s.axisxalertsize,c));s.axisxalertsize.top=0;s.axisxalertsize.left=0;s.axisxalertsize.right=0;s.axisxalertsize.bottom=
0;t=t.replace(/%xalert-inner-size%/g,X(s.axisxalertsize,c)).replace(/%xalert-inner-style%/g,p(s.axisxalertsize,c));t=t.replace(/%x-id%/g,D).replace(/%date-style%/g,p(s.dateaxissize,c));t=t.replace(/%y-id%/g,h).replace(/%price-style%/g,p(s.priceaxissize,c));t=t.replace(/%legend-id%/g,q).replace(/%legend-style%/g,p(s.legendsize,c));t=t.replace(/%wm-id%/g,v).replace(/%watermark-style%/g,p(s.watermarksize,c));t=t.replace(/%cp-id%/g,u).replace(/%cp-style%/g,p(s.controlpanelsize,c)).replace(/%item-id%/g,
g);t=t.replace(/%zoom-id%/g,n).replace(/%zoom-style%/g,p(s.zoomsize,c));t=t.replace(/%lastupdate-id%/g,F).replace(/%lastupdate-style%/g,p(s.lastupdatesize,c,1));t=t.replace(/%communic-id%/g,H).replace(/%communic-style%/g,p(s.communicsize,c,1));t=t.replace(/%xmsg-id%/g,m).replace(/%xmsg-style%/g,p(s.axisxmsgsize,c));try{"undefined"!=typeof s.axisxinmainsize.view?s.axisxinmainsize.width=s.innermainsize.width:s.axisxinmainsize.view=!1,t=t.replace(/%canvas-axisxinmain-id%/g,z).replace(/%axisxinmain-style%/g,
p(s.axisxinmainsize,c)).replace(/%axisxinmain-size%/g,X(s.axisxinmainsize,c))}catch(O){}v="";try{if("undefined"!=typeof e.currenlayout.chart_panels.price.htmlcontainers){var y=e.currenlayout.chart_panels.price.htmlcontainers;if("undefined"!=typeof y.items)for(B=0;B<y.items.length;B++){var x=y.items[B],P="";"undefined"!=typeof x.css&&(P=x.css);var E="";"undefined"!=typeof x.content&&(E=x.content);var K="",A=e.commonutils.func.returnShortUniqID();"undefined"!=typeof x.id&&(K=x.id);var L=r({width:e.currenlayout.chart.width,
height:C.price.height},x),v=v+e.patterns.panels.htmlcontainer.replace(/%id%/g,A).replace(/%css%/g,P+" price-html-container").replace(/%style%/g,p(L,c,1));0<K.length&&(N.htmlcustomcontainers[K]=A);if("undefined"!=typeof x.items)for(E="",P=0;P<x.items.length;P++){var M=x.items[P];switch(M.type){case "toolbar":var Q=za(M),E=E+Q}}v=v.replace(/%html%/g,E)}}}catch(R){}t=t.replace(/%htmlcontainers%/g,v);if("undefined"!=typeof e.currenlayout.chart_panels.price.collapselegend){y=!1==e.currenlayout.chart_panels.price.collapselegend.collapseopen||
"false"==e.currenlayout.chart_panels.price.collapselegend.collapseopen?!1:!0;x=L=A=A="";try{A=e.currenlayout.chart_panels.price.collapselegend.title_1,L=e.currenlayout.chart_panels.price.collapselegend.title_2}catch(S){}A=!1==y?A:L;x=!1==y?" collapsebutton_close":" collapsebutton_open";t=t.replace(/%collapselegend-id%/g,w).replace(/%title1%/g,A).replace(/%collapseopen%/g,y).replace(/%caption%/g,"").replace(/ %collapsebuttoncss%/g,x).replace(/%collapselegend-style%/g,p(s.collapselegend,c,1).replace("pointer-events:none",
""))}else t=t.replace(/%collapselegend-id%/g,"").replace(/%title1%/g,"").replace(/%collapseopen%/g,"").replace(/%caption%/g,"").replace(/%collapselegend-id%/g,w).replace(/%collapselegend-style%/g,'style=" display:none; "');t=t.replace(/%font-icon%/g,""==G.icon_prefix?"":G.icon_prefix+"panel-communic").replace(/%icon-prefix%/g,G.icon_prefix).replace(/%icon-source%/g,G.icon_source);b.append(t);d.push({id:a,guiid:g,type:"price",width:s.panelsize.width+c,height:s.panelsize.height+c,y:{guiid:h,width:s.priceaxissize.width+
c,height:s.priceaxissize.height+c},x:{guiid:D,width:s.dateaxissize.width+c,height:s.dateaxissize.height+c},axisxalert:{guiid:J,width:s.axisxalertsize.width+c,height:s.axisxalertsize.height+c},axisxmsg:{guiid:m,width:s.axisxmsgsize.width+c,height:s.axisxmsgsize.height+c},main:{guiid:l,width:s.innermainsize.width+c,height:s.innermainsize.height+c},pricealert:{guiid:I,width:s.innermainsize.width+c,height:s.innermainsize.height+c},canvasalert:{guiid:f,width:s.innermainsize.width,height:s.innermainsize.height},
canvasxalert:{guiid:k,width:s.axisxalertsize.width,height:s.axisxalertsize.height},axisxinmain:{guiid:z,width:s.axisxinmainsize.width,height:s.axisxinmainsize.height},legend:{guiid:q},zoom:{guiid:n},controlpanel:{guiid:u},lastupdate:{guiid:F},communic:{guiid:H}})}if($.prochartcache.get("#"+g,"button.button-action"))$.prochartcache.get("#"+g,"button.button-action").on("click",function(){var b=$(this).attr("tid");if("undefined"!=typeof b&&"undefined"!=typeof e.actions)switch(b){case "legend-collapse":var a=
g,c=e.commonutils.func.toBool($(this).attr("collapseopen")),f="",k="";try{f=e.currenlayout.chart_panels.price.collapselegend.title_1,k=e.currenlayout.chart_panels.price.collapselegend.title_2}catch(h){}e.actions.action(b,a,c);$(this).attr("collapseopen",!0==c?!1:!0);$(this).find("b").html(!1==c?k:f);a:for(b=g,c=!0==c?!1:!0,a=0;a<d.length;a++)if(d[a].guiid==b&&("price"==d[a].type||"study"==d[a].type||"plugin"==d[a].type||"signal"==d[a].type)){d[a].legend.collapseopen=c;break a}}})}function za(a){var b=
e.commonutils.func.returnShortUniqID();a.guiid=b;var c=e.patterns.panels.toolbar.replace(T,"").replace(/%id%/g,b).replace(/%style%/g,a.possition?Aa(a.possition):"");a.fns=[];a.fns.push({prop:"view",actions:["$('#"+b+"').css('display',%value%?'block':'none')"]});if(a.possition){a.possition.fns=[];for(var g="right left width height top bottom".split(" "),f=0;f<g.length;f++)a.possition.fns.push({prop:g[f],actions:["$('#"+b+"').css('"+g[f]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]})}return{header:c}}
function Aa(a,b){var c="";if(!a)return c;var c="undefined"==typeof a.position?c+"position :absolute;":c+"position :"+a.position+"; ",g="px";"undefined"!=typeof b&&null!=b&&(g=b);"undefined"!=typeof a.display&&(c=c+"display :"+a.display+";");"undefined"!=typeof a.left&&(c=c+"left :"+Q(a.left,g)+"; ");"undefined"!=typeof a.right&&(c=c+"right :"+Q(a.right,g)+"; ");"undefined"!=typeof a.top&&(c=c+"top :"+Q(a.top,g)+"; ");"undefined"!=typeof a.bottom&&(c=c+"bottom :"+Q(a.bottom,g)+"; ");"undefined"!=typeof a.width&&
(c=c+"width :"+Q(a.width,g)+"; ");"undefined"!=typeof a.height&&(c=c+"height :"+Q(a.height,g)+"; ");"undefined"!=typeof a.view&&!0!=a.view&&(c+="display : none; ");return 0<c.length?'style="'+c+'"':null}function aa(a,b){var c=$.prochartcache.get(e.init.chartcontainer),g=e.currenlayout.chart_panels.unit;if(null!=e.patterns.panels.study){var f=e.commonutils.func.returnShortUniqID(),k=e.commonutils.func.returnShortUniqID(),l=e.commonutils.func.returnShortUniqID(),h=e.commonutils.func.returnShortUniqID(),
m=e.commonutils.func.returnShortUniqID(),r=e.commonutils.func.returnShortUniqID(),q=qa(),n=e.patterns.panels.study.replace(T,"").replace(/%id%/g,f).replace(/%guiid%/g,f).replace(/%pane-style%/g,p(q.panelsize,g)),n=n.replace(/%main-id%/g,k).replace(/%main-style%/g,p(q.innermainsize,g)),n=n.replace(/%x-id%/g,h).replace(/%date-style%/g,p(q.dateaxissize,g)),n=n.replace(/%y-id%/g,l).replace(/%price-style%/g,p(q.priceaxissize,g)),n=n.replace(/%legend-id%/g,m).replace(/%legend-style%/g,p(q.legendsize,g)),
n=n.replace(/%cp-id%/g,r).replace(/%panel-id%/g,a).replace(/%cp-style%/g,p(q.controlpanelsize,g)).replace(/%item-id%/g,f),n=n.replace(/%icon-source%/g,G.icon_source).replace(/%icon-prefix%/g,G.icon_prefix);"top"==b.position?c.prepend(n):c.append(n);c={id:a,guiid:f,type:"study",width:q.panelsize.width+g,height:q.panelsize.height+g,y:{guiid:l,width:q.priceaxissize.width+g,height:q.priceaxissize.height+g},x:{guiid:h,width:q.dateaxissize.width+g,height:q.dateaxissize.height+g},main:{guiid:k,width:q.innermainsize.width+
g,height:q.innermainsize.height+g},legend:{guiid:m},controlpanel:{guiid:r}};"top"==b.position?d.unshift(c):d.push(c)}}function ua(a,b){$.prochartcache.get(e.init.chartcontainer);var c=e.currenlayout.chart_panels.unit;if(null!=e.patterns.panels.splitter){var g=e.commonutils.func.returnShortUniqID(),f=e.commonutils.func.returnShortUniqID(),d=ra(),l=e.patterns.panels.splitter.replace(T,"").replace(/%id%/g,g).replace(/%guiid%/g,g).replace(/%pane-style%/g,p(d.panelsize,c)),l=l.replace(/%main-id%/g,f).replace(/%main-style%/g,
p(d.innermainsize,c));$("#"+a).after(l);c={id:null,guiid:g,type:"splitter",width:d.panelsize.width+c,height:d.panelsize.height+c,pane_before_guiid:a,pane_after_guiid:b,main:{guiid:f,width:d.innermainsize.width+c,height:d.innermainsize.height+c}};z.push(c);return c}}function U(a){var b=$.prochartcache.get(e.init.chartcontainer),c=e.currenlayout.chart_panels.unit;if(null!=e.patterns.panels.signal){var g=e.commonutils.func.returnShortUniqID(),f=e.commonutils.func.returnShortUniqID(),k=e.commonutils.func.returnShortUniqID(),
l=e.commonutils.func.returnShortUniqID(),h=e.commonutils.func.returnShortUniqID(),m=sa(),r=e.patterns.panels.signal.replace(/=""/g,"").replace(/%id%/g,g).replace(/%guiid%/g,g).replace(/%pane-style%/g,p(m.panelsize,c)),r=r.replace(/%main-id%/g,f).replace(/%main-style%/g,p(m.innermainsize,c)),r=r.replace(/%legend-id%/g,k).replace(/%legend-style%/g,p(m.legendsize,c)),r=r.replace(/%cp-id%/g,l).replace(/%cp-style%/g,p(m.controlpanelsize,c)).replace(/%item-id%/g,g),r=r.replace(/%alert-id%/g,h).replace(/%alert-style%/g,
p(m.alertsize,c)).replace(/%item-id%/g,g);b.append(r);a={id:a,guiid:g,type:"signal",width:m.panelsize.width+c,height:m.panelsize.height+c,main:{guiid:f,width:m.innermainsize.width+c,height:m.innermainsize.height+c},legend:{guiid:k},controlpanel:{guiid:l},alert:{guiid:h}};d.push(a);return a}return null}function pa(a,b){var c=e.currenlayout.chart_panels.price,g={width:e.currenlayout.chart.width,height:null!=b?b:C.price.height},f=r(g,c.main,c),d=r(g,c.axisx,c),l=r(g,c.axisy,c),h=r(g,c.legend,c),m=r(g,
c.zoom,c),p=r(g,c.controlpanel,c),q=r(g,c.lastupdate,c),n=r(g,c.communic,c),v=r(g,c.watermark,c),u=r(g,c.collapselegend,c),w=r(g,c.axisxalert,c),z=r(g,c.volume,c),B=r(g,c.axisxmsg,c),c=r(g,c.axisxinmain,c);return{panelsize:g,innermainsize:f,dateaxissize:d,priceaxissize:l,legendsize:h,zoomsize:m,controlpanelsize:p,lastupdatesize:q,communicsize:n,watermarksize:v,collapselegend:u,axisxalertsize:w,volumesize:z,axisxmsgsize:B,axisxinmainsize:c}}function qa(a,b){var c=e.currenlayout.chart_panels.study,
g={width:e.currenlayout.chart.width,height:null!=b?b:C.study.height},f=r(g,c.main),d=r(g,c.axisx),l=r(g,c.axisy),h=r(g,c.legend),c=r(g,c.controlpanel);return{panelsize:g,innermainsize:f,dateaxissize:d,priceaxissize:l,legendsize:h,controlpanelsize:c}}function ra(){var a={width:e.currenlayout.chart.width,height:0},b=r(a,e.currenlayout.chart_panels.splitterx.main);return{panelsize:a,innermainsize:b}}function sa(a,b){var c={width:e.currenlayout.chart.width,height:null!=b?b:C.signal.height},g=e.currenlayout.chart_panels.signal,
f=r(c,g.main),d=r(c,g.legend),l=r(c,g.controlpanel),g=r(c,g.alert);return{panelsize:c,innermainsize:f,legendsize:d,controlpanelsize:l,alertsize:g}}function r(a,b,c){var g={};if("undefined"==typeof b)return g;var e="",e="undefined"==typeof b.width?"auto":b.width;"undefined"!=typeof b.left&&(g.left="center"==b.left?parseInt(a.width/2-e/2):b.left);"undefined"!=typeof b.right&&(g.right="center"==b.right?parseInt(a.width/2+e/2):b.right);switch(e){case "auto":"undefined"==typeof g.left&&(g.left=0);"undefined"==
typeof g.right&&(g.right=0);var e=isNaN(g.right)?0:parseInt(g.right),d=isNaN(g.left)?0:parseInt(g.left);g.width=a.width-d-e;break;case "inherit":break;default:g.width=b.width}"undefined"!=typeof b.top&&(g.top=b.top);e="";if("undefined"!=typeof b.bottom)switch(e=b.bottom,e){case "relative":e=0;if("undefined"!=typeof b.bottomrelative)for(var d=b.bottomrelative.split(","),l=0;l<d.length;l++)if(!1==isNaN(d[l]))e+=parseInt(d[l]);else if("undefined"!=typeof c[d[l]]&&"undefined"!=typeof c[d[l]].height){var h=
c[d[l]].height,m=!1;try{m=Ba(d[l],c),B.debug(d[l],"view_rel_block_view:",m)}catch(p){}!1==isNaN(h)&&!0==m&&(e+=parseInt(h))}g.bottom=e;break;default:g.bottom=e}c="";c="undefined"==typeof b.height?"auto":b.height;switch(c){case "auto":"undefined"==typeof g.top&&(g.top=0);"undefined"==typeof g.bottom&&(g.bottom=0);c=isNaN(g.top)?0:parseInt(g.top);e=isNaN(g.bottom)?0:parseInt(g.bottom);g.height=a.height-c-e;break;case "inherit":break;default:g.height=b.height}"undefined"!=typeof b.paddingtop&&(g.paddingtop=
b.paddingtop);"undefined"!=typeof b.paddingright&&(g.paddingright=b.paddingright);"undefined"!=typeof b.paddingbottom&&(g.paddingbottom=b.paddingbottom);"undefined"!=typeof b.paddingtleft&&(g.paddingtleft=b.paddingtleft);"undefined"!=typeof b.view&&(g.view=b.view);return g}function Ba(a,b){switch(a){case "axisxalert":var c=!1;try{c=b.axisxalert.view}catch(g){}var d=!1;try{d=e.apiinit.guipart.enabled.alert}catch(k){}return c&&d;case "axisx":c=!1;try{c=b.axisx.view}catch(l){}return c;case "axisxmsg":c=
!1;try{c=b.axisxmsg.view}catch(h){}return c}return!1}function X(a,b){var c="";"undefined"!=typeof a.width&&(c=c+' width ="'+a.width+'" ');"undefined"!=typeof a.height&&(c=c+' height ="'+a.height+'" ');return c}function p(a,b,c){var e="";"undefined"!=typeof a.position&&(e=e+"position:"+a.position+"; ");"undefined"!=typeof a["z-index"]&&(e=e+"z-index:"+a["z-index"]+"; ");"undefined"!=typeof a["pointer-events"]&&(e=e+"pointer-events:"+a["pointer-events"]+"; ");"undefined"!=typeof a.more&&(e+=a.more);
"undefined"!=typeof a.left&&(e=e+"left :"+a.left+(isNaN(a.left)?"":b)+"; ");"undefined"!=typeof a.right&&(e=e+"right :"+a.right+(isNaN(a.right)?"":b)+"; ");"undefined"!=typeof a.top&&(e=e+"top :"+a.top+(isNaN(a.top)?"":b)+"; ");"undefined"!=typeof a.bottom&&(e=e+"bottom :"+a.bottom+(isNaN(a.bottom)?"":b)+"; ");"undefined"!=typeof a.width&&(e=e+"width :"+a.width+(isNaN(a.width)?"":b)+"; ");"undefined"!=typeof a.height&&(e=e+"height :"+a.height+(isNaN(a.height)?"":b)+"; ");"undefined"!=typeof a.view&&
!0!=a.view&&(e+="display : none; ");return 0<e.length?("undefined"!=typeof c&&1==c&&(e+=" position:absolute; z-index:30; pointer-events:none "),'style="'+e+'"'):'style=" display:none; "'}function V(a,b,c){var d=$.prochartcache.get(e.init.chartcontainer,"#"+a.guiid),f=d.width(),k=d.height();b=pa(b,c);var l=$.prochartcache.get(e.init.chartcontainer,"#"+a.main.guiid),h=$.prochartcache.get(e.init.chartcontainer,"#"+a.x.guiid);$.prochartcache.get(e.init.chartcontainer,"#"+a.axisxalert.guiid);c=$.prochartcache.get(e.init.chartcontainer,
"#"+a.pricealert.guiid);var m=$.prochartcache.get(e.init.chartcontainer,"#"+a.y.guiid),p=$.prochartcache.get(e.init.chartcontainer,"#"+a.legend.guiid),q=$.prochartcache.get(e.init.chartcontainer,"#"+a.zoom.guiid),n=$.prochartcache.get(e.init.chartcontainer,"#"+a.axisxinmain.guiid),r=0,u=0;try{k!=d.height()&&(u=d.outerHeight(!0)-d.height()),f!=d.width()&&(r=d.outerWidth(!0)-d.width())}catch(w){}0!=r&&(b.panelsize.width=parseInt(b.panelsize.width)-r);0!=u&&(b.panelsize.height=parseInt(b.panelsize.height)-
u);f="height width top right bottom left".split(" ");for(k=0;k<f.length;k++)"undefined"!=typeof b.panelsize[f[k]]&&(d.css(f[k],b.panelsize[f[k]]),a[f[k]]=b.panelsize[f[k]]);null!==v.guiid&&v.guiid!=a.guiid?d.css("display","none"):d.css("display","block");for(k=0;k<f.length;k++)"undefined"!=typeof b.innermainsize[f[k]]&&(l.css(f[k],b.innermainsize[f[k]]),a.main[f[k]]=b.innermainsize[f[k]]);for(k=0;k<f.length;k++)"undefined"!=typeof b.dateaxissize[f[k]]&&(h.css(f[k],b.dateaxissize[f[k]]),a.x[f[k]]=
b.dateaxissize[f[k]]);if(c)for(k=$.prochartcache.get(c,".alertdata"),l=$.prochartcache.get(e.init.chartcontainer,"#"+a.canvasalert.guiid),d=["width","height"],h=0;h<d.length;h++)"undefined"!=typeof b.innermainsize[d[h]]&&(c.css(d[h],b.innermainsize[d[h]]+"px"),k.css(d[h],b.innermainsize[d[h]]+"px"),l.attr(d[h],b.innermainsize[d[h]]));if("undefined"!=typeof n){d=["width","height"];for(k=0;k<f.length;k++)"undefined"!=typeof b.axisxinmainsize[f[k]]&&(n.css(f[k],b.axisxinmainsize[f[k]]),a.axisxinmain[f[k]]=
b.axisxinmainsize[f[k]]);for(h=0;h<d.length;h++)"undefined"!=typeof b.axisxinmainsize[d[h]]&&n.attr(d[h],b.axisxinmainsize[d[h]])}for(k=0;k<f.length;k++)"undefined"!=typeof b.priceaxissize[f[k]]&&(m.css(f[k],b.priceaxissize[f[k]]),a.y[f[k]]=b.priceaxissize[f[k]]);for(k=0;k<f.length;k++)"undefined"!=typeof b.legendsize[f[k]]&&(p.css(f[k],b.legendsize[f[k]]),a.legend[f[k]]=b.legendsize[f[k]]);for(k=0;k<f.length;k++)"undefined"!=typeof b.zoomsize[f[k]]&&(q.css(f[k],b.zoomsize[f[k]]),a.zoom[f[k]]=b.zoomsize[f[k]])}
function ba(a,b,c){b=qa(b,c);c=$.prochartcache.get(e.init.chartcontainer,"#"+a.guiid);var d=$.prochartcache.get(e.init.chartcontainer,"#"+a.main.guiid),f=$.prochartcache.get(e.init.chartcontainer,"#"+a.x.guiid),k=$.prochartcache.get(e.init.chartcontainer,"#"+a.y.guiid),l=$.prochartcache.get(e.init.chartcontainer,"#"+a.legend.guiid),h=0,m=0;try{m=c.outerHeight(!0)-c.height(),h=c.outerWidth(!0)-c.width()}catch(p){}0!=h&&(b.panelsize.width=parseInt(b.panelsize.width)-h);0!=m&&(b.panelsize.height=parseInt(b.panelsize.height)-
m);h="height width top right bottom left".split(" ");for(m=0;m<h.length;m++)"undefined"!=typeof b.panelsize[h[m]]&&(c.css(h[m],b.panelsize[h[m]]),a[h[m]]=b.panelsize[h[m]]);null!==v.guiid&&v.guiid!=a.guiid?c.css("display","none"):c.css("display","block");for(m=0;m<h.length;m++)"undefined"!=typeof b.innermainsize[h[m]]&&(d.css(h[m],b.innermainsize[h[m]]),a.main[h[m]]=b.innermainsize[h[m]]);for(m=0;m<h.length;m++)"undefined"!=typeof b.dateaxissize[h[m]]&&(f.css(h[m],b.dateaxissize[h[m]]),a.x[h[m]]=
b.dateaxissize[h[m]]);for(m=0;m<h.length;m++)"undefined"!=typeof b.priceaxissize[h[m]]&&(k.css(h[m],b.priceaxissize[h[m]]),a.y[h[m]]=b.priceaxissize[h[m]]);for(m=0;m<h.length;m++)"undefined"!=typeof b.legendsize[h[m]]&&(l.css(h[m],b.legendsize[h[m]]),a.legend[h[m]]=b.legendsize[h[m]])}function na(a){for(var b=ra(),c=$.prochartcache.get(e.init.chartcontainer,"#"+a.guiid),d=$.prochartcache.get(e.init.chartcontainer,"#"+a.main.guiid),f="height width top right bottom left".split(" "),k=0;k<f.length;k++)"undefined"!=
typeof b.panelsize[f[k]]&&(c&&c.css(f[k],b.panelsize[f[k]]),a[f[k]]=b.panelsize[f[k]]);null!==v.guiid?c&&c.css("display","none"):c&&c.css("display","block");for(k=0;k<f.length;k++)"undefined"!=typeof b.innermainsize[f[k]]&&(d&&d.css(f[k],b.innermainsize[f[k]]),a.main[f[k]]=b.innermainsize[f[k]])}function ca(a,b,c){b=sa(b,c);c=$.prochartcache.get(e.init.chartcontainer,"#"+a.guiid);for(var d=$.prochartcache.get(e.init.chartcontainer,"#"+a.main.guiid),f=$.prochartcache.get(e.init.chartcontainer,"#"+
a.legend.guiid),k=$.prochartcache.get(e.init.chartcontainer,"#"+a.alert.guiid),l="height width top right bottom left".split(" "),h=0;h<l.length;h++)"undefined"!=typeof b.panelsize[l[h]]&&(c&&c.css(l[h],b.panelsize[l[h]]),a[l[h]]=b.panelsize[l[h]]);null!==v.guiid&&v.guiid!=a.guiid?c&&c.css("display","none"):c&&c.css("display","block");for(h=0;h<l.length;h++)"undefined"!=typeof b.innermainsize[l[h]]&&(d&&d.css(l[h],b.innermainsize[l[h]]),a.main[l[h]]=b.innermainsize[l[h]]);for(h=0;h<l.length;h++)"undefined"!=
typeof b.legendsize[l[h]]&&(f&&f.css(l[h],b.legendsize[l[h]]),a.legend[l[h]]=b.legendsize[l[h]]);for(h=0;h<l.length;h++)"undefined"!=typeof b.alertsize[l[h]]&&(alert&&k.css(l[h],b.alertsize[l[h]]),a.alert[l[h]]=b.alertsize[l[h]])}function J(){var a=0,b=e.currenlayout.chart.height;if(2>u.length||null!=v.guiid)C.price.height=b,C.study.height=b,C.signal.height=b;else{for(var c=0,d=0,f=0;f<u.length;f++)switch(u[f].type){case "price":a+=e.currenlayout.chart_panels.price.grow;break;case "study":a+=e.currenlayout.chart_panels.study.grow;
c+=1;break;case "signal":a+=e.currenlayout.chart_panels.signal.grow;d+=1;break;case "splitter":break;default:a+=1}a=b/a;for(f=0;f<u.length;f++)switch(u[f].type){case "price":C.price.height=parseInt(e.currenlayout.chart_panels.price.grow*a);break;case "study":C.study.height=parseInt(e.currenlayout.chart_panels.study.grow*a);break;case "signal":C.signal.height=parseInt(e.currenlayout.chart_panels.signal.grow*a)}C.price.height=b-c*C.study.height-d*C.signal.height}return 0}function Q(a,b,c){return"auto"==
a.toString().toLowerCase()||"inherit"==a.toString().toLowerCase()?a:"undefined"!=typeof c?a+c+b:a+b}function K(a){return"undefined"==typeof a||null==a?!1:"string"==typeof a?"true"==a.toLowerCase()?!0:!1:"boolean"==typeof a?a:!1}var e=ta,N={};e.panels=N;var T=/=""/g,G=e.api.layout.getbuttonStyle(),B=e.api.debug.getLogger("prochart.gui.panels"),v={guiid:null},S={};N.htmlcustomcontainers={};N.gui={createPanels:function(){Y()},resizePanels:function(){H();oa()},resizeFullpagePanels:function(){H();oa()},
disablePanelEvents:function(a,b){b?($.prochartcache.get(e.init.chartcontainer,".legend-buttons","a")&&$.prochartcache.get(e.init.chartcontainer,".legend-buttons","a").css("pointer-events","none"),$.prochartcache.get(e.init.chartcontainer,".controlpanel-buttons","a")&&$.prochartcache.get(e.init.chartcontainer,".controlpanel-buttons","a").css("pointer-events","none"),$.prochartcache.get(e.init.chartcontainer,".chart-button")&&$.prochartcache.get(e.init.chartcontainer,".chart-button").css("pointer-events",
"none"),$.prochartcache.get(e.init.chartcontainer,".chart-price-communic")&&$.prochartcache.get(e.init.chartcontainer,".chart-price-communic").css("pointer-events","none"),$.prochartcache.get(e.init.chartcontainer,".legend-price-collapsebutton")&&$.prochartcache.get(e.init.chartcontainer,".legend-price-collapsebutton").css("pointer-events","none"),$.prochartcache.get(e.init.chartcontainer,".chart-price-zoom")&&$.prochartcache.get(e.init.chartcontainer,".chart-price-zoom").css("pointer-events","none"),
$.prochartcache.get(e.init.chartcontainer,".chart-price-zoom",".zoom-buttons")&&$.prochartcache.get(e.init.chartcontainer,".chart-price-zoom",".zoom-buttons").css("pointer-events","none"),$.prochartcache.get(e.init.chartcontainer,".chart-pane-main")&&$.prochartcache.get(e.init.chartcontainer,".chart-pane-main").css("pointer-events","none")):($.prochartcache.get(e.init.chartcontainer,".legend-buttons","a")&&$.prochartcache.get(e.init.chartcontainer,".legend-buttons","a").css("pointer-events","All"),
$.prochartcache.get(e.init.chartcontainer,".controlpanel-buttons","a")&&$.prochartcache.get(e.init.chartcontainer,".controlpanel-buttons","a").css("pointer-events","All"),$.prochartcache.get(e.init.chartcontainer,".chart-button")&&$.prochartcache.get(e.init.chartcontainer,".chart-button").css("pointer-events","All"),$.prochartcache.get(e.init.chartcontainer,".chart-price-communic")&&$.prochartcache.get(e.init.chartcontainer,".chart-price-communic").css("pointer-events","All"),$.prochartcache.get(e.init.chartcontainer,
".legend-price-collapsebutton")&&$.prochartcache.get(e.init.chartcontainer,".legend-price-collapsebutton").css("pointer-events","All"),$.prochartcache.get(e.init.chartcontainer,".chart-price-zoom")&&$.prochartcache.get(e.init.chartcontainer,".chart-price-zoom").css("pointer-events","All"),$.prochartcache.get(e.init.chartcontainer,".chart-price-zoom",".zoom-buttons")&&$.prochartcache.get(e.init.chartcontainer,".chart-price-zoom",".zoom-buttons").css("pointer-events","All"),$.prochartcache.get(e.init.chartcontainer,
".chart-pane-main")&&$.prochartcache.get(e.init.chartcontainer,".chart-pane-main").css("pointer-events","All"));e.alertobj&&e.alertobj.gui.initMouseEvents(b)},addSignalPanel:function(a){"undefined"==typeof a&&(a="signalid");var b=[];b.push({type:"signal",id:a});for(var c=0;c<b.length;c++)u.push(b[c]);null!=v.guiid&&W();J();a=U(a);H();F();la();ma();ia();ka();e.chart.AdjustSize(null,null);return a},deletePanelById:function(a){da([{id:a}]);e.chart.AdjustSize(null,null)},updateLegends:function(a){ea(a)},
activateonResizePanel:function(a,b){for(var c=0;c<d.length;c++)if(d[c].id==a){d[c].onResizePanel=b;break}},changeLocalization:function(a,b){var c=$.prochartcache.get(e.init.chartcontainer);c&&("rtl"==b?c.hasClass("dir-rtl")||c.addClass("dir-rtl"):c.removeClass("dir-rtl"))},onLastUpdateChange:function(a,b){try{for(var c=0;c<d.length;c++)if("price"==d[c].type){if("undefined"!=typeof d[c].lastupdate.guiid)try{$.prochartcache.get("#"+d[c].lastupdate.guiid)&&$.prochartcache.get("#"+d[c].lastupdate.guiid).html(b)}catch(e){}break}}catch(f){}},
onCommunication:function(a,b){try{for(var c=0;c<d.length;c++)if("price"==d[c].type){if("undefined"!=typeof d[c].communic.guiid)try{$.prochartcache.get("#"+d[c].communic.guiid,"> .panel-communic")&&$.prochartcache.get("#"+d[c].communic.guiid,"> .panel-communic").removeClass(b?"ComOff":"ComOn")}catch(e){}break}}catch(f){}},collapselegend:function(a,b){$.prochartcache.get("#"+a,".legend-study, .legend-compare")&&$.prochartcache.get("#"+a,".legend-study, .legend-compare").each(function(){switch(b){case !0:case "true":$(this).addClass("hide-legend");
break;case !1:case "false":$(this).hasClass("hide-legend")&&$(this).removeClass("hide-legend")}})},getAlertZone:function(){for(var a=0;a<d.length;a++)if("price"==d[a].type)try{return d[a].axisxalert.guiid}catch(b){break}return null},getPriceAlertZone:function(){for(var a=0;a<d.length;a++)if("price"==d[a].type)try{return d[a].pricealert.guiid}catch(b){break}return null},getPriceAlertCanvasZone:function(){for(var a=0;a<d.length;a++)if("price"==d[a].type)try{return d[a].canvasalert.guiid}catch(b){break}return null},
getMsgZone:function(){for(var a=0;a<d.length;a++)if("price"==d[a].type)try{return d[a].axisxmsg.guiid}catch(b){break}return null},refreshPriceWithInfoBars:function(){J();for(var a=0;a<d.length;a++)switch(d[a].type){case "price":V(d[a],d[a].width,d[a].height),w(d[a],"controlpanel"),w(d[a],"zoom"),w(d[a],"legend"),w(d[a],"lastupdate"),w(d[a],"communic"),w(d[a],"axisxmsg"),e.chart.AdjustSize(null,null)}},slideToRight:function(){"undefined"==typeof status&&(status=!0);var a=$.prochartcache.get(e.parent,
".layout-innner-container"),b=$.prochartcache.get(e.parent,".htmlchart ");switch(status){case !0:a&&a.css("left","-250px");b&&b.css("overflow","hidden");break;case !1:a&&a.css("left","inherit"),b&&b.css("overflow","inherit")}},slideToLeft:function(){"undefined"==typeof e.currenlayout.layout.slideToLeftStatus&&(e.currenlayout.layout.slideToLeftStatus=!1);var a=e.currenlayout.layout.slideToLeftStatus,b=$.prochartcache.get("#"+e.currenlayout.layout.guiniid),c=$.prochartcache.get(e.parent,".htmlchart "),
d=$.prochartcache.get("#"+e.currenlayout.layout.lockguiid);switch(a){case !1:c&&c.css("overflow","hidden");d&&d.css("display","block");b&&b.animate({left:"-=250"},400);e.currenlayout.layout.slideToLeftStatus=!0;break;case !0:b&&b.animate({left:"+=250"},400),c&&c.css("overflow","inherit"),d&&d.css("display","none"),e.currenlayout.layout.slideToLeftStatus=!1}},drawZoomIntervale:function(a,b,c,d,f,k){d=null;if(I("price").axisxinmain&&(d=I("price").axisxinmain,f=$.prochartcache.get("#"+d.guiid))){a=null;
try{a=f[0]}catch(l){return}b=e.chart.getDateByIndex(b);c=e.chart.getDateByIndex(c);f=a.getContext("2d");a.width=a.width;a.height=d.height;null!=b&&null!=c&&(f.beginPath(),f.fillStyle=e.api.props.chart.gui.zoom.interval_font_color?e.api.props.chart.gui.zoom.interval_font_color:"#000000",f.shadowBlur=0,f.textAlign="left",f.textBaseline="bottom",d=e.api.props.chart.gui.zoom.interval_font_size?e.api.props.chart.gui.zoom.interval_font_size:10,k=e.api.props.chart.gui.zoom.interval_font_padding?e.api.props.chart.gui.zoom.interval_font_padding:
3,f.font=(e.api.props.chart.gui.zoom.interval_font_bold?"bold":"")+" "+d+"px sans-serif",f.fillText(b,k,d),f.textAlign="right",f.fillText(c,a.width-k,d))}},viewPriceAlert:function(){if(e.apiinit.guipart.enabled.alert)try{$.prochartcache.get("#"+I("price").pricealert.guiid)&&$.prochartcache.get("#"+I("price").pricealert.guiid).css({display:"block"})}catch(a){}else try{$.prochartcache.get("#"+I("price").pricealert.guiid)&&$.prochartcache.get("#"+I("price").pricealert.guiid).css({display:"none"})}catch(b){}}};
N.core={requestPanels:function(a){u=[];for(var b=0;b<a.length;b++)u.push(a[b]),0<b&&b<a.length&&u.push({id:"",type:"splitter"});Y();a=[];for(b=0;b<d.length;b++)"study"!=d[b].type&&"price"!=d[b].type||a.push(d[b]);return a},returnPanels:function(){for(var a=[],b=0;b<d.length;b++)"study"!=d[b].type&&"price"!=d[b].type||a.push(d[b]);return a},addPanels:function(a){for(var b=0;b<a.length;b++)u.push(a[b]);null!=v.guiid&&W();J();for(b=0;b<a.length;b++)switch(a[b].type){case "price":Z(a[b].id);break;case "study":aa(a[b].id,
a[b]);break;case "signal":U(a[b].id)}H();F();la();ma();ia();ka();a=[];for(b=0;b<d.length;b++)"study"!=d[b].type&&"price"!=d[b].type||a.push(d[b]);return a},deletePanels:da,updateLegends:ea};var d=[];Object.defineProperty(N,"allpanels",{get:function(){return d}});var C={price:{height:null},study:{height:null},signal:{height:null}},u=[],z=[];return N};
